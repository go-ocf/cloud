syntax = "proto3";

package ocf.cloud.grpcgateway.pb;

import "github.com/plgd-dev/cloud/grpc-gateway/pb/clientConfiguration.proto";
import "github.com/plgd-dev/cloud/grpc-gateway/pb/devices.proto";
import "github.com/plgd-dev/cloud/grpc-gateway/pb/retrievePendingCommands.proto";
import "github.com/plgd-dev/cloud/grpc-gateway/pb/retrieveDevicesMetadata.proto";
import "github.com/plgd-dev/cloud/grpc-gateway/pb/updateDeviceShadowSynchronization.proto";
import "github.com/plgd-dev/cloud/resource-aggregate/pb/events.proto";



option go_package = "github.com/plgd-dev/cloud/grpc-gateway/pb;pb";

service GrpcGateway {
  // Get all devices
  rpc GetDevices (GetDevicesRequest) returns (stream Device) {}
  // Get resource links of devices.
  rpc GetResourceLinks(GetResourceLinksRequest) returns (stream ocf.cloud.resourceaggregate.pb.ResourceLinksPublished) {}

  rpc RetrieveResourceFromDevice(RetrieveResourceFromDeviceRequest) returns (ocf.cloud.resourceaggregate.pb.ResourceRetrieved) {}

  // Retrieve resources values from resource shadow
  rpc RetrieveResources(RetrieveResourcesRequest) returns (stream Resource) {}
  // Update resource values
  rpc UpdateResource(UpdateResourceRequest) returns (ocf.cloud.resourceaggregate.pb.ResourceUpdated) {}

  // Subscribe to events
  rpc SubscribeToEvents(stream ocf.cloud.grpcgateway.pb.SubscribeToEvents) returns (stream Event) {}

  // Get client configuration
  rpc GetClientConfiguration(ClientConfigurationRequest) returns (ClientConfigurationResponse) {}

  // Delete resource at the device.
  rpc DeleteResource(DeleteResourceRequest) returns (ocf.cloud.resourceaggregate.pb.ResourceDeleted) {}

  // Create resource at the device.
  rpc CreateResource(CreateResourceRequest) returns (ocf.cloud.resourceaggregate.pb.ResourceCreated) {}

  // UpdateDeviceShadowSynchronization enables/disables shadow synchronization of device.
  rpc UpdateDeviceShadowSynchronization(UpdateDeviceShadowSynchronizationRequest) returns (UpdateDeviceShadowSynchronizationResponse) {}

  rpc RetrievePendingCommands(RetrievePendingCommandsRequest) returns (stream PendingCommand) {}

  rpc RetrieveDevicesMetadata(RetrieveDevicesMetadataRequest) returns (stream ocf.cloud.resourceaggregate.pb.DeviceMetadataUpdated) {}
}